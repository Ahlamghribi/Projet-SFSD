#include <stdio.h>
#include <stdbool.h>
#include <string.h>

typedef struct {
    int jour, mois, annee;
} date;

typedef struct {
    char nom[20];
    int qte;
    float prix;
    int reference;
    char ingredient[30];
    struct date datefabr, dateexp;

} Medicament;

typedef struct {
    char tab[500];
    int nb;
} Bloc;

typedef struct {
    int nbrenrg, nbbloc;
} entete;


int taillenrg(Bloc buf, int j) {
    int cmp = 1;   

    while (buf.tab[j] != '#') {
        j++;
        cmp++;
    }

    return cmp;
}

int taillebloc(Bloc buf) {
    int j = 1;   

    for (int i = 0; i < buf.nb; i++) {
        j = j + taillenrg(buf, j);
        j++;   
    }

    return j;
}


void Suppression(int reference, FILE* fichier) {
    FILE *f;
    bool trouv;
    struct entete t;
    int i, j;
    Bloc buf;

    f = fopen(nomfich, "rb+");

    Rech(reference, nomfich, trouv, i, j); 
    int cmp = taillenrg(buf.tab, j);

    if (trouv) {
        fseek(f, i * sizeof(Bloc), SEEK_SET);
        fread(&buf, sizeof(Bloc), 1, f);

        while (!feof(fichier)) {
            if (taillebloc(buf) + cmp <= 500) {
                while (buf.tab[j + cmp] != '#') {
                    buf.tab[j] = buf.tab[j + cmp];
                    j++;
                }
                j++;
            } else { 
                while (buf.tab[j + cmp] != '#') { 
                    buf.tab[j] = '*';  
                    j++;
                }

